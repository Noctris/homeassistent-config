- id: 'master_bedroom_alarm'
  alias: Master Bedroom Wake-up Routine when alarm is set
  description: ''
  trigger:
  - platform: template
    value_template: '{{ (states.input_datetime.master_bedroom_alarm_clock_time.attributes[''timestamp''] | timestamp_custom(''%H:%M'', False) ) == ( states.sensor.time.state ) }}'
  condition:
  - condition: and
    conditions:
#    - condition: state
#      entity_id: person.michel
#      state: home
    - condition: state
      entity_id: input_boolean.master_bedroom_alarm_enabled
      state: 'on'
  action:
  - service: script.wake_up_light_10_minutes
    data_template:
      lamp: light.master_bedroom_spots
  - service: media_player.volume_set
    data:
      entity_id: media_player.master_bedroom_speaker
      volume_level: 30
  - service: spotcast.start
    - data:
        entity_id: media_player.master_bedroom_speaker
        shuffle: true
        uri: 'spotify:playlist:3xVR8cMwohCrRQnaXL6GFz'
